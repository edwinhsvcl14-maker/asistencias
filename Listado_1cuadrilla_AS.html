<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Asistencia - Primera Cuadrilla</title>
    
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ========================================================== */
        /* Estilos CSS Integrados para Dise√±o Profesional */
        /* ========================================================== */

        :root {
            --color-principal: #F5F5DC; /* Cream (Crema) */
            --color-secundario: #FAF0E6; /* Linen (Blanco roto) */
            --color-acento: #A0522D; /* Sienna (Marr√≥n medio) (Marr√≥n fuerte) */
            --color-texto-oscuro: #3E2723; /* Marr√≥n oscuro para texto */
            --color-borde: #D2B48C; /* Tan (Marr√≥n claro) */
            --color-exito: #38761D; /* Verde oscuro */
            --color-peligro: #CC0000; /* Rojo oscuro */
        }

        body {
            font-family: 'Georgia', serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-secundario);
            color: var(--color-texto-oscuro);
        }

        .contenedor {
            width: 90%;
            max-width: 1200px;
            margin: 40px auto;
            background-color: var(--color-principal);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 30px;
        }

        /* ---------------------------------------------------------- */
        /* Estilos del Encabezado */
        /* ---------------------------------------------------------- */
        header {
            display: flex;
            justify-content: space-between; 
            align-items: center; 
            padding-bottom: 20px;
            border-bottom: 3px solid var(--color-acento);
            margin-bottom: 30px;
        }

        .header-titulo {
            flex-grow: 1; 
            text-align: center;
        }

        .header-titulo h1 {
            color: var(--color-acento);
            font-size: 2.2em; 
            margin: 0;
        }
        
        .header-titulo p {
            margin: 5px 0 0 0;
        }

        .logo-espacio {
            width: 100px; 
            height: 100px;
            border: 2px dashed var(--color-borde);
            border-radius: 50%; 
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8em;
            color: var(--color-acento);
            flex-shrink: 0; 
            padding: 5px;
            box-sizing: border-box;
            background-color: white; 
        }
        
        /* ---------------------------------------------------------- */
        /* Estilos del Dashboard */
        /* ---------------------------------------------------------- */
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--color-secundario);
            border: 1px solid var(--color-borde);
        }

        .tarjeta-resumen {
            flex: 1 1 calc(33.33% - 20px); 
            min-width: 250px; 
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
            border-left: 5px solid var(--color-acento);
        }

        .tarjeta-resumen h3 {
            margin-top: 0;
            color: var(--color-acento);
            font-size: 1.1em;
            text-transform: uppercase;
        }

        /* Estilos espec√≠ficos para el canvas de Chart.js */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 150px; 
            height: 150px;
            margin: 10px auto 0 auto; 
        }
        .chart-container canvas {
            display: block; 
        }

        .tarjeta-resumen .valor {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--color-texto-oscuro);
            margin-top: 15px; 
        }
        .tarjeta-resumen .descripcion {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }


        /* ---------------------------------------------------------- */
        /* Estilos de la Tabla */
        /* ---------------------------------------------------------- */

        .tabla-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border: 1px solid var(--color-borde);
            border-radius: 8px;
            overflow: hidden; 
        }

        th, td {
            padding: 14px 18px;
            text-align: center;
            border-bottom: 1px solid var(--color-borde);
            border-right: 1px solid var(--color-borde);
        }

        th:last-child, td:last-child {
            border-right: none;
        }

        thead th {
            background-color: var(--color-acento);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        /* Efecto Hover (Interactivo) */
        tbody tr:hover {
            background-color: #E8E4D9; 
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        /* Colores Alternos para Filas */
        tbody tr:nth-child(even) {
            background-color: #FCF8F3; 
        }

        /* Columna de Asistencia - Colores Condicionales */
        .asistio { color: var(--color-exito); font-weight: bold; } 
        .falto { color: var(--color-peligro); font-weight: bold; } 

        /* ---------------------------------------------------------- */
        /* Bot√≥n de Descarga */
        /* ---------------------------------------------------------- */

        .pie-pagina {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px dashed var(--color-borde);
        }

        #btnDescargarPDF {
            background-color: var(--color-acento);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        #btnDescargarPDF:hover {
            background-color: #8B4513; 
            transform: translateY(-2px);
        }

        #btnDescargarPDF:active {
            transform: translateY(0);
        }

        /* ---------------------------------------------------------- */
        /* Media Queries para Responsividad */
        /* ---------------------------------------------------------- */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            .tarjeta-resumen {
                flex: 1 1 100%; 
                min-width: auto;
            }
            .header-titulo h1 {
                font-size: 1.8em;
            }
            header {
                flex-direction: column;
            }
            .logo-espacio {
                margin-bottom: 10px;
            }
            .header-titulo {
                text-align: center;
            }
            .chart-container {
                max-width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>

    <div class="contenedor fade-in">
        <header>
            <div class="logo-espacio" id="logoCuadrilla">
                <img src="https://edwinhsvcl14-maker.github.io/asistencias/logo_1cuadrilla.png" alt="Logo de la Cuadrilla" style="width: 80%; height: 80%; object-fit: cover; border-radius: 50%;">
            </div>
            <div class="header-titulo">
                <h1>Control de Asistencia Primera Cuadrilla</h1>
                <p>Listado detallado de participaci√≥n en actividades.</p>
            </div>
            <div class="logo-espacio" style="visibility: hidden;">
                </div> 
        </header>

        <h2>üìä Resumen de Participaci√≥n</h2>
        <section class="dashboard">
            <div class="tarjeta-resumen">
                <h3>Total de Hermanos</h3>
                <div class="valor" id="totalHermanos">0</div>
                <p class="descripcion">Miembros activos en la lista.</p>
            </div>

            <div class="tarjeta-resumen">
                <h3>Promedio General</h3>
                <div class="chart-container">
                    <canvas id="chartPromedioGeneral"></canvas>
                </div>
            </div>

            <div class="tarjeta-resumen">
                <h3>Participaci√≥n Misas</h3>
                <div class="chart-container">
                    <canvas id="chartPromedioMisas"></canvas>
                </div>
            </div>
        </section>
        <h2>üìã Detalle de Asistencias</h2>
        <div class="tabla-responsive">
            <table id="tablaAsistencias">
                <thead>
                    <tr>
                        <th style="text-align: left;">Nombre y Apellido</th>
                        <th>Misas de Retiro</th>
                        <th>Asambleas</th>
                        <th>Jornadas</th>
                        <th>Total Asistencias</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </div>

        <div class="pie-pagina">
            <button id="btnDescargarPDF">Descargar Reporte Detallado (Simulaci√≥n)</button>
        </div>
    </div>

    <script>
        const datosAsistencias = [
    { id: 1, nombre: "ALVA ALVAREZ ALFONSO DE JESUS", retiro: true, asamblea: true, jornadas: false },
    { id: 2, nombre: "AQUIJE VALDEZ WILLY HUDSON", retiro: true, asamblea: true, jornadas: false },
    { id: 3, nombre: "ARTEAGA LINARES RICARDO DANIEL", retiro: true, asamblea: true, jornadas: false },
    { id: 4, nombre: "ASCUES URIBE CESAR AUGUSTO", retiro: true, asamblea: true, jornadas: false },
    { id: 5, nombre: "BARBARAN LUYO JORGE LUIS", retiro: true, asamblea: true, jornadas: false },
    { id: 6, nombre: "BARRIONUEVO ROMAN RAFAEL ANTONIO", retiro: true, asamblea: true, jornadas: false },
    { id: 7, nombre: "BORJAS VARGAS BRAULIO PEDRO", retiro: true, asamblea: true, jornadas: false },
    { id: 8, nombre: "BRAVO CASTRO BENIGNO ROBERTO", retiro: true, asamblea: true, jornadas: false },
    { id: 9, nombre: "CAJAVILCA MAYO ANTHONY YELTSYN", retiro: true, asamblea: true, jornadas: false },
    { id: 10, nombre: "CALDERON VIVAR ENRIQUE MARIO", retiro: true, asamblea: true, jornadas: false },
    { id: 11, nombre: "CALLO MENDOZA MANUEL", retiro: true, asamblea: true, jornadas: false },
    { id: 12, nombre: "CANEPA CALERO MANUEL ESTEBAN", retiro: true, asamblea: true, jornadas: false },
    { id: 13, nombre: "CANEPA SANTIAGO MANUEL LUIS", retiro: true, asamblea: true, jornadas: false },
    { id: 14, nombre: "CARTY MEZA CARLOS ELIAS", retiro: true, asamblea: true, jornadas: false },
    { id: 15, nombre: "CASTA√ëEDA GONZALES ROBERTO GREGORIO", retiro: true, asamblea: true, jornadas: false },
    { id: 16, nombre: "CASTILLO LEQUERICA DEMIJEAS", retiro: true, asamblea: true, jornadas: false },
    { id: 17, nombre: "CASTRO MAC ECHRAN GIAMPIER ALEXANDER", retiro: true, asamblea: true, jornadas: false },
    { id: 18, nombre: "CHACON CASTRO SEBASTIAN AUGUSTO", retiro: true, asamblea: true, jornadas: false },
    { id: 19, nombre: "CHU HARO JUAN JOSE", retiro: true, asamblea: true, jornadas: false },
    { id: 20, nombre: "CHU OLAYA ANTONIO", retiro: true, asamblea: true, jornadas: false },
    { id: 21, nombre: "CHU OLAYA JOSE LUIS", retiro: true, asamblea: true, jornadas: false },
    { id: 22, nombre: "CORILLA QUEVEDO STEFANO RAUL", retiro: true, asamblea: true, jornadas: false },
    { id: 23, nombre: "DONAYRE LOVERA JOSE LUIS", retiro: true, asamblea: true, jornadas: false },
    { id: 24, nombre: "DONAYRE REYES LUIS OSWALDO", retiro: true, asamblea: true, jornadas: false },
    { id: 25, nombre: "ESPINOZA LAMAS BRAULIO RODRIGO", retiro: true, asamblea: true, jornadas: false },
    { id: 26, nombre: "FELIPA MU√ëOZ ERNESTO ALONSO", retiro: true, asamblea: true, jornadas: false },
    { id: 27, nombre: "FERRE CASTRO LUIS ALBERTO", retiro: true, asamblea: true, jornadas: false },
    { id: 28, nombre: "GALLO CCAHUIN NICOLAS", retiro: true, asamblea: true, jornadas: false },
    { id: 29, nombre: "GALLO MILACHAY JOSE", retiro: true, asamblea: true, jornadas: false },
    { id: 30, nombre: "GANOZA CARRICOVA JES√öS", retiro: true, asamblea: true, jornadas: false },
    { id: 31, nombre: "GARAYAR MENDOZA FREDDY ANTONIO", retiro: true, asamblea: true, jornadas: false },
    { id: 32, nombre: "GARCIA ESCUDERO CARLOS", retiro: true, asamblea: true, jornadas: false },
    { id: 33, nombre: "GARCIA LEON JESUS KARL GIANMARCO", retiro: true, asamblea: true, jornadas: false },
    { id: 34, nombre: "GARRETONDE ORDO√ëEZ EDSON PAOLO GERARDO", retiro: true, asamblea: true, jornadas: false },
    { id: 35, nombre: "GARRO CCAHUIN FRANCISCO NICOLAS", retiro: true, asamblea: true, jornadas: false },
    { id: 36, nombre: "GUEVARA ESCALERA JUAN CARLOS", retiro: true, asamblea: true, jornadas: false },
    { id: 37, nombre: "HERVIAS MEZA CESAR HUMBERTO", retiro: true, asamblea: true, jornadas: false },
    { id: 38, nombre: "ILLESCAS LAVINZ FERNANDO ALFONSO", retiro: true, asamblea: true, jornadas: false },
    { id: 39, nombre: "INFANTE TINOCO JORGE", retiro: true, asamblea: true, jornadas: false },
    { id: 40, nombre: "JIMENEZ RUIZ SERGIO ALFONSO", retiro: true, asamblea: true, jornadas: false },
    { id: 41, nombre: "LAGRAVERE CABRERA JOSE CARLOS", retiro: true, asamblea: true, jornadas: false },
    { id: 42, nombre: "LARRIVIERE LUCAR GUNTHER PAUL", retiro: true, asamblea: true, jornadas: false },
    { id: 43, nombre: "LEANDRO ZAVALA ALEJANDRO", retiro: true, asamblea: true, jornadas: false },
    { id: 44, nombre: "LINDEMBERG FARFAN HANS", retiro: true, asamblea: true, jornadas: false },
    { id: 45, nombre: "LINDEMBERG WONG HUMBERTO JORGE", retiro: true, asamblea: true, jornadas: false },
    { id: 46, nombre: "LOSTAUNAU VELEZ JOSEPH SEBASTIAN", retiro: true, asamblea: true, jornadas: false },
    { id: 47, nombre: "LOYOLA YLLESCAS JOS√â LUIS", retiro: true, asamblea: true, jornadas: false },
    { id: 48, nombre: "MACHUCA CHAMPI LEANDRO CESAR", retiro: true, asamblea: true, jornadas: false },
    { id: 49, nombre: "MASSONI LLAQUE CHRISTIAN ROBERTO", retiro: true, asamblea: true, jornadas: false },
    { id: 50, nombre: "MELENDEZ BEJARANO JOSE", retiro: true, asamblea: true, jornadas: false },
    { id: 51, nombre: "MENDOZA SIFUENTES JESUS EMILIO", retiro: true, asamblea: true, jornadas: false },
    { id: 52, nombre: "MONCADA CHAVEZ JOSE PAUL", retiro: true, asamblea: true, jornadas: false },
    { id: 53, nombre: "NAVARRO POLO BRYAN", retiro: true, asamblea: true, jornadas: false },
    { id: 54, nombre: "ORELLANO BARRIONUEVO ANGELO LUCIANO", retiro: true, asamblea: true, jornadas: false },
    { id: 55, nombre: "ORELLANO BARRIONUEVO FABRIZIO ABELARDO", retiro: true, asamblea: true, jornadas: false },
    { id: 56, nombre: "ORTIZ ISHUU JAIME DANIEL", retiro: true, asamblea: true, jornadas: false },
    { id: 57, nombre: "PAREDES CISNEROS BERNABE", retiro: true, asamblea: true, jornadas: false },
    { id: 58, nombre: "PIGHI BARRIONUEVO CARLOS", retiro: true, asamblea: true, jornadas: false },
    { id: 59, nombre: "REYES ARTIEDA SEBASTIAN RODRIGO", retiro: true, asamblea: true, jornadas: false },
    { id: 60, nombre: "REYES BAZAN EFRAIN", retiro: true, asamblea: true, jornadas: false },
    { id: 61, nombre: "REYES PE√ëA JULIO CARLOS", retiro: true, asamblea: true, jornadas: false },
    { id: 62, nombre: "SALAZAR PIGHI PAUL JOAO", retiro: true, asamblea: true, jornadas: false },
    { id: 63, nombre: "SALAZAR VERGARA RAUL", retiro: true, asamblea: true, jornadas: false },
    { id: 64, nombre: "SOLIS CENTENO FELIPE ABELARDO", retiro: true, asamblea: true, jornadas: false },
    { id: 65, nombre: "SUSSONI MURO ALDO JEFFERSON", retiro: true, asamblea: true, jornadas: false },
    { id: 66, nombre: "TANTAHUATAY GARCIA JORGE ALFREDO", retiro: true, asamblea: true, jornadas: false },
    { id: 67, nombre: "TORRES JIMENEZ LUIS MIGUEL", retiro: true, asamblea: true, jornadas: false },
    { id: 68, nombre: "VERA AGUILAR CHRISTIAN ALBERTO", retiro: true, asamblea: true, jornadas: false },
    { id: 69, nombre: "VIDAL BARRIONUEVO MANUEL", retiro: true, asamblea: true, jornadas: false },
    { id: 70, nombre: "VILLACORTA HUERTAS FRANK FREDY", retiro: true, asamblea: true, jornadas: false },
    { id: 71, nombre: "VILLANUEVA SILVA OSCAR ANTONIO", retiro: true, asamblea: true, jornadas: false },
    { id: 72, nombre: "YLLESCAS ALARCON JULIO CESAR", retiro: true, asamblea: true, jornadas: false },
    { id: 73, nombre: "YLLESCAS PEDRAZA ALEXIS", retiro: true, asamblea: true, jornadas: false },
    { id: 74, nombre: "YLLESCAS PEDRAZA CRYTIAN", retiro: true, asamblea: true, jornadas: false }
];

        const tablaBody = document.querySelector('#tablaAsistencias tbody');
        const btnDescargar = document.getElementById('btnDescargarPDF');

        let chartPromedioGeneral;
        let chartPromedioMisas;

        // Definimos el color del texto oscuro (para el centro del gr√°fico)
        const colorTextoOscuro = getComputedStyle(document.documentElement).getPropertyValue('--color-texto-oscuro').trim();

        // ** Plugin para mostrar texto en el centro del gr√°fico (Chart.js)**
        const centerTextPlugin = {
            id: 'centerText',
            beforeDraw: function(chart) {
                if (chart.config.options.plugins.centerText) {
                    const {width, height, ctx} = chart;
                    ctx.restore();
                    
                    // Obtener el porcentaje a mostrar
                    const percentage = chart.data.datasets[0].data[0].toFixed(1);
                    
                    const fontSize = (height / 120).toFixed(2);
                    ctx.font = `bold ${fontSize}em 'Georgia', serif`;
                    ctx.textBaseline = "middle";

                    const text = `${percentage}%`;
                    const textX = Math.round((width - ctx.measureText(text).width) / 2);
                    const textY = height / 2;

                    ctx.fillStyle = colorTextoOscuro; 
                    ctx.fillText(text, textX, textY);
                    ctx.save();
                }
            }
        };
        // Registrar el plugin globalmente
        Chart.register(centerTextPlugin);

        // Funci√≥n para calcular las estad√≠sticas
        function calcularEstadisticas() {
            const totalHermanos = datosAsistencias.length;
            let totalMisasAsistidas = 0;
            let sumaTotalAsistenciasEventosIndividuales = 0; 
            const numeroTiposDeEventos = 3; 

            datosAsistencias.forEach(persona => {
                const asistenciasPersona = (persona.retiro ? 1 : 0) + (persona.asamblea ? 1 : 0) + (persona.jornadas ? 1 : 0);
                sumaTotalAsistenciasEventosIndividuales += asistenciasPersona;
                if (persona.retiro) totalMisasAsistidas++;
            });

            // Promedio general (66.7% en este caso de ejemplo)
            const totalAsistenciasPosiblesEnTodosLosEventos = totalHermanos * numeroTiposDeEventos;
            const promedioGeneralPorcentaje = (sumaTotalAsistenciasEventosIndividuales / totalAsistenciasPosiblesEnTodosLosEventos) * 100;

            // Promedio de participaci√≥n en Misas (100% en este caso de ejemplo)
            const promedioMisasPorcentaje = (totalMisasAsistidas / totalHermanos) * 100;

            return {
                totalHermanos,
                promedioGeneral: parseFloat(promedioGeneralPorcentaje.toFixed(1)),
                promedioMisas: parseFloat(promedioMisasPorcentaje.toFixed(1)),
            };
        }

        // Funci√≥n para renderizar el Dashboard con gr√°ficos circulares Chart.js
        function renderizarDashboard() {
            const stats = calcularEstadisticas();
            
            const colorAcento = getComputedStyle(document.documentElement).getPropertyValue('--color-acento').trim();
            const colorExito = getComputedStyle(document.documentElement).getPropertyValue('--color-exito').trim();
            const colorFondoGrafico = '#E0E0E0'; 

            document.getElementById('totalHermanos').textContent = stats.totalHermanos;

            // 1. Gr√°fico de Promedio General
            const ctxGeneral = document.getElementById('chartPromedioGeneral').getContext('2d');
            
            // Creamos o actualizamos el gr√°fico
            chartPromedioGeneral = new Chart(ctxGeneral, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [stats.promedioGeneral, 100 - stats.promedioGeneral],
                        backgroundColor: [
                            colorExito,
                            colorFondoGrafico
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%', 
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true },
                        centerText: true // Habilitamos el plugin para este gr√°fico
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true
                    }
                }
            });

            // 2. Gr√°fico de Participaci√≥n en Misas
            const ctxMisas = document.getElementById('chartPromedioMisas').getContext('2d');
            
            // Creamos o actualizamos el gr√°fico
            chartPromedioMisas = new Chart(ctxMisas, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [stats.promedioMisas, 100 - stats.promedioMisas],
                        backgroundColor: [
                            colorAcento, 
                            colorFondoGrafico
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true },
                        centerText: true // Habilitamos el plugin para este gr√°fico
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true
                    }
                }
            });
        }


        // Funci√≥n para renderizar la tabla de detalle (sin cambios)
        function renderizarTabla() {
            tablaBody.innerHTML = ''; 

            datosAsistencias.forEach(persona => {
                const fila = document.createElement('tr');
                let totalAsistencias = 0;

                const celdaNombre = document.createElement('td');
                celdaNombre.textContent = persona.nombre;
                celdaNombre.style.textAlign = 'left'; 
                fila.appendChild(celdaNombre);

                ['retiro', 'asamblea', 'jornadas'].forEach(evento => {
                    const celdaEvento = document.createElement('td');
                    if (persona[evento]) {
                        celdaEvento.textContent = '‚úÖ'; 
                        celdaEvento.classList.add('asistio');
                        totalAsistencias++;
                    } else {
                        celdaEvento.textContent = '‚ùå'; 
                        celdaEvento.classList.add('falto');
                    }
                    fila.appendChild(celdaEvento);
                });

                const celdaTotal = document.createElement('td');
                celdaTotal.textContent = totalAsistencias;
                celdaTotal.style.fontWeight = 'bold';
                fila.appendChild(celdaTotal);

                tablaBody.appendChild(fila);
            });
        }

        // Funci√≥n para simular la descarga de PDF (sin cambios)
        function descargarPDF() {
            alert("Simulando la generaci√≥n y descarga del reporte detallado. En un sistema real, el archivo se descargar√≠a ahora.");
            
            const contenido = "--- Reporte Detallado de Asistencias - Primera Cuadrilla ---\n\n" + 
                              "Nombre | Retiro | Asamblea | Jornadas | Total\n" +
                              "---------------------------------------------------\n" +
                              datosAsistencias.map(p => 
                                  `${p.nombre} | ${p.retiro ? 'Si' : 'No'} | ${p.asamblea ? 'Si' : 'No'} | ${p.jornadas ? 'Si' : 'No'} | ${(p.retiro + p.asamblea + p.jornadas)}`
                              ).join('\n');

            const blob = new Blob([contenido], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Reporte_Asistencias_Cuadrilla.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Inicializaci√≥n de la p√°gina al cargar
        document.addEventListener('DOMContentLoaded', () => {
            renderizarDashboard();
            renderizarTabla();
        });
        btnDescargar.addEventListener('click', descargarPDF);
    </script>

</body>
</html>
