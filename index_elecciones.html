<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elecciones Generales - Hermandad HSVCL</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Georgia:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
<style>
    /* ========================================================== */
    /* Estilos CSS Din√°micos y Profesionales (FINAL) */
    /* ========================================================== */

    /* Variables de Color Actualizadas con un Toque m√°s Suave/Degradado */
    :root {
        --color-primario-fondo: #FFF8E1; /* Light Yellowish Cream (Base clara) */
        --color-secundario-fondo: #FEFBEA; /* Off-White/Very Light Cream (Fondo de secciones) */
        --color-acento-base: #A0522D; /* Sienna (Marr√≥n medio) */
        --color-acento-oscuro: #5D4037; /* Marr√≥n m√°s oscuro (Texto principal/Degradado) */
        --color-texto-oscuro: #3E2723; /* Marr√≥n oscuro para texto */
        
        /* Colores de estado para la barra */
        --color-completo: #7CB342; /* Verde Oliva suave (Completado) */
        --color-activo-claro: #A0522D; /* Sienna (Activo) - Punto parpadeante */
        --color-activo-oscuro: #6D4C41; 
        --color-pendiente: #D2B48C; /* Tan (Pendiente) */

        /* Degradados y Sombras */
        --sombra-elegante: 0 10px 20px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0, 0, 0, 0.1);
        --degradado-acento: linear-gradient(135deg, var(--color-activo-claro) 0%, var(--color-activo-oscuro) 100%); 
        --degradado-fondo-pagina: linear-gradient(180deg, #FAF0E6 0%, #FFFDE7 100%); /* Degradado suave de fondo */
    }

    /* Fondo de la p√°gina con degradado bidireccional */
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        background: var(--degradado-fondo-pagina);
        color: var(--color-texto-oscuro);
        line-height: 1.6;
        min-height: 100vh;
    }
    
    /* ---------------------------------------------------------- */
    /* ESTILOS DE CARGA (PRELOADER) */
    /* ---------------------------------------------------------- */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--color-primario-fondo); /* Cream base */
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        opacity: 1;
        visibility: visible;
        /* DURACI√ìN DE TRANSICI√ìN DEL PRELOADER A 1 SEGUNDO (MODIFICADO) */
        transition: opacity 1s ease-out, visibility 1s ease-out; 
    }

    /* Estado de preloader oculto */
    #preloader.hidden {
        opacity: 0;
        visibility: hidden;
    }

    /* Estilo del GIF/Icono de carga */
    .loader {
        width: 120px;
        height: 120px;
        border: 10px solid var(--color-secundario-fondo);
        border-top: 10px solid var(--color-acento-base); /* Color de acento para la animaci√≥n */
        border-radius: 50%;
        animation: spin 1.2s linear infinite;
        margin-bottom: 20px;
        box-shadow: var(--sombra-elegante);
    }
    
    .loader-text {
        color: var(--color-acento-oscuro);
        font-size: 1.2em;
        font-weight: 600;
        letter-spacing: 1px;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* Efecto de aparici√≥n del Contenido */
    .contenedor {
        width: 95%;
        max-width: 1100px;
        margin: 30px auto;
        background: linear-gradient(to right, #FFF8E1 0%, #FEFBEA 100%);
        box-shadow: var(--sombra-elegante);
        border-radius: 20px;
        padding: 30px;
        transition: all 0.3s ease;
        
        /* ESTADO INICIAL OCULTO CON TRANSICI√ìN */
        opacity: 0;
        transform: translateY(20px);
        /* RETRASO DE 1 SEGUNDO PARA QUE EL PRELOADER SE VAYA COMPLETAMENTE (MODIFICADO) */
        transition: opacity 1s ease-in-out 1s, transform 1s ease-in-out 1s; 
    }

    /* ESTADO FINAL VISIBLE */
    .contenedor.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* ---------------------------------------------------------- */
    /* Resto de Estilos (Mantenidos) */
    /* ---------------------------------------------------------- */
    
    /* Contenedor principal con degradado y sombra */
    /* .contenedor est√° redefinido arriba para el efecto de carga */

    /* Encabezado Principal */
    .main-header {
        text-align: center;
        padding-bottom: 25px;
        border-bottom: 3px double var(--color-acento-base);
        margin-bottom: 30px;
    }

    .header-logo-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 15px;
    }

    /* Logos m√°s grandes */
    .logo-header {
        width: 200px; 
        height: 200px;
        margin: 0 20px;
        display: flex; 
        justify-content: center;
        align-items: center;
    }

    .logo-header img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .header-texto h1 {
        color: var(--color-acento-oscuro);
        font-family: 'Georgia', serif;
        font-size: 2.2em;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .header-texto h2 {
        font-size: 1.4em;
        margin: 0;
        color: var(--color-acento-base);
        font-weight: 500;
    }


    /* Secciones de Contenido */
    .seccion {
        margin-bottom: 35px;
        padding: 20px;
        background-color: var(--color-secundario-fondo);
        border-radius: 12px;
        border: 1px solid #E0E0E0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .seccion h3 {
        color: var(--color-acento-oscuro);
        font-size: 1.6em;
        border-bottom: 2px solid var(--color-acento-base);
        padding-bottom: 5px;
        margin-top: 0;
        font-weight: 600;
    }

    /* Estilos del Comit√© Electoral (Centrado y Compactado) */
    .comite-electoral-container {
        display: flex;
        justify-content: center; 
    }

    .comite-grid {
        width: 100%;
        max-width: 700px; /* Ancho m√°s compacto */
        display: grid;
        grid-template-columns: 1fr 2.5fr 1fr; /* Ajuste de columnas */
        gap: 10px 15px; 
        margin-top: 15px;
        padding: 15px 20px;
        border: 1px dashed var(--color-acento-base);
        border-radius: 8px;
        background-color: rgba(160, 82, 45, 0.05);
    }

    .comite-header {
        font-weight: 700;
        color: var(--color-acento-oscuro);
        padding-bottom: 5px;
        border-bottom: 2px solid var(--color-acento-base);
        text-transform: uppercase;
        font-size: 0.85em;
        text-align: center; /* Centrado de t√≠tulos de columna */
    }
    .comite-header.comite-cuadrilla {
        text-align: center !important;
    }

    .comite-cargo {
        font-weight: 600;
        color: var(--color-acento-base);
        font-size: 0.9em;
        text-align: center; /* Centrado del cargo */
    }
    .comite-hermano {
        font-weight: 500;
        font-size: 0.9em;
        text-align: left; /* Alineaci√≥n del nombre */
    }
    .comite-cuadrilla {
        text-align: center; /* Centrado de la pertenencia */
        font-size: 0.85em;
        font-style: italic;
        color: #666;
    }

    /* Barra de Progreso - Estilos y Animaciones */
    .progress-title {
        color: var(--color-acento-oscuro);
        font-size: 1.4em;
        font-weight: 700;
        margin-bottom: 20px;
        text-transform: uppercase;
        text-align: center;
    }

    .progress-bar-container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .timeline {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 1000px;
        position: relative;
        margin: 20px 0;
        padding-bottom: 10px;
    }

    .timeline-line {
        position: absolute;
        top: 25px; 
        left: 5%;
        right: 5%;
        height: 5px;
        background: var(--color-pendiente); 
        z-index: 1;
        border-radius: 2px;
    }

    .timeline-progress {
        position: absolute;
        top: 25px; 
        left: 5%;
        width: 0%; 
        height: 5px;
        background: var(--color-completo); 
        z-index: 2;
        border-radius: 2px;
        transition: width 1s ease-out;
    }

    .timeline-item {
        flex: 1;
        text-align: center;
        position: relative;
        z-index: 3;
        padding-top: 55px;
        border-radius: 8px;
        padding-bottom: 10px; 
        margin: 0 5px;
        transition: background-color 0.5s ease;
    }

    /* Fondo para etapas (separaci√≥n visual) */
    .timeline-item.completed {
        background-color: rgba(124, 179, 66, 0.05); /* Verde suave */
    }

    .timeline-item.active {
        background-color: rgba(160, 82, 45, 0.1); /* Marr√≥n suave */
    }

    .timeline-point {
        width: 20px;
        height: 20px;
        background: var(--color-pendiente);
        border-radius: 50%;
        position: absolute;
        top: 17px;
        left: 50%;
        transform: translateX(-50%);
        transition: all 0.5s ease;
        border: 4px solid var(--color-secundario-fondo); 
        box-shadow: 0 0 0 2px var(--color-pendiente);
    }

    /* ESTADO 1: Completado */
    .timeline-item.completed .timeline-point {
        background: var(--color-completo); 
        box-shadow: 0 0 0 2px var(--color-completo);
    }

    /* ESTADO 2: Activo (Activo con efecto de pulso) */
    .timeline-item.active .timeline-point {
        background: var(--color-activo-claro); 
        box-shadow: 0 0 0 4px var(--color-activo-claro), 0 0 15px var(--color-activo-claro);
        transform: translateX(-50%) scale(1.3);
        
        /* Animaci√≥n de Parpadeo/Pulso */
        animation: pulse 1.5s infinite alternate;
    }

    @keyframes pulse {
        from {
            box-shadow: 0 0 0 4px var(--color-activo-claro), 0 0 10px rgba(160, 82, 45, 0.5);
        }
        to {
            box-shadow: 0 0 0 8px rgba(160, 82, 45, 0.3), 0 0 20px var(--color-activo-claro);
        }
    }

    .timeline-date {
        font-size: 0.9em;
        font-weight: 700;
        color: var(--color-acento-base);
        display: block;
        margin-bottom: 5px;
    }

    .timeline-label {
        font-size: 0.95em;
        font-weight: 500;
        color: var(--color-texto-oscuro);
        line-height: 1.2;
    }

    /* Leyenda de Estados */
    .legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 10px;
        padding: 10px 0;
        border-top: 1px dashed #DDD;
        font-size: 0.9em;
    }
    .legend-item {
        display: flex;
        align-items: center;
        font-weight: 500;
    }
    .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
        border: 1px solid #AAA;
    }
    .legend-color.completed { background-color: var(--color-completo); border-color: var(--color-completo); }
    .legend-color.active { 
        background-color: var(--color-activo-claro); 
        box-shadow: 0 0 5px rgba(160, 82, 45, 0.5);
        border-color: var(--color-activo-claro);
    }
    .legend-color.pending { background-color: var(--color-pendiente); }


    /* Bot√≥n de Acci√≥n Principal y Pie de P√°gina */
    .btn-container {
        text-align: center;
        margin-top: 40px;
    }

    .btn-main {
        background: var(--degradado-acento);
        color: white;
        padding: 15px 35px;
        text-decoration: none;
        border-radius: 50px;
        font-size: 1.2em;
        font-weight: 700;
        letter-spacing: 1px;
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        display: inline-block;
        text-transform: uppercase;
    }

    .btn-main:hover {
        background: linear-gradient(135deg, var(--color-activo-oscuro) 0%, var(--color-activo-claro) 100%);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        transform: translateY(-3px) scale(1.02);
    }

    .pie-pagina {
        text-align: center;
        margin-top: 30px;
        padding-top: 15px;
        border-top: 1px dashed var(--color-acento-base);
    }

    /* ---------------------------------------------------------- */
    /* Responsive Design (Media Queries) */
    /* ---------------------------------------------------------- */
    @media (max-width: 900px) {
        .logo-header {
            width: 150px;
            height: 150px;
        }
        .header-texto h1 { font-size: 2em; }
        .header-texto h2 { font-size: 1.3em; }
    }

    @media (max-width: 768px) {
        /* Barra de Progreso Vertical en M√≥viles */
        .timeline {
            flex-direction: column;
            align-items: flex-start;
            padding-left: 30px; 
            width: 90%;
            margin: 20px auto;
        }

        .timeline-line, .timeline-progress {
            top: 0;
            bottom: 0;
            left: 10px;
            width: 5px;
            height: 100%; 
            right: auto;
        }

        .timeline-progress {
            height: 0%; 
            width: 5px;
        }

        .timeline-item {
            padding: 15px 0 15px 25px; 
            width: 100%;
            margin: 5px 0;
            text-align: left;
        }

        .timeline-point {
            top: 25px; 
            left: -20px; 
            transform: none; 
        }
        
        .timeline-item.active .timeline-point {
             transform: scale(1.3);
        }
    }

    @media (max-width: 600px) {
        /* OCULTAR LOGOS LATERALES Y CENTRAR EL TEXTO EN M√ìVILES PEQUE√ëOS */
        .logo-header {
            display: none; /* Oculta ambos logos en el header-logo-container */
        }

        .header-logo-container {
            justify-content: center; /* Asegura que el texto se centre */
            margin-bottom: 10px;
        }
        
        .header-texto {
            text-align: center; /* Asegura el centrado del texto */
        }
        
        .header-texto h1 { 
            font-size: 1.8em; /* Reducir ligeramente el tama√±o del t√≠tulo principal */
            margin-bottom: 0px;
        }

        .header-texto h2 {
            font-size: 1.1em; /* Reducir el subt√≠tulo para mejor ajuste */
            padding: 0 10px; /* Peque√±o padding para evitar que toque el borde */
        }
        
        /* Comit√© Electoral Apilado en M√≥viles */
        .comite-grid {
            max-width: 100%;
            grid-template-columns: 1fr;
            gap: 5px;
            padding: 10px;
        }
        .comite-header, .comite-cuadrilla {
            display: none;
        }
        .comite-cargo, .comite-hermano, .comite-cuadrilla {
            text-align: left !important;
        }
        .comite-cargo {
            font-size: 1em;
            font-weight: 700;
            color: var(--color-acento-oscuro);
            margin-top: 10px;
        }
        
        .legend {
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
            padding-left: 10px;
        }
    }
</style>
</head>
<body>
    
    <div id="preloader">
        <div class="loader"></div>
        <div class="loader-text">Cargando Proceso Electoral...</div>
    </div>
    <div class="contenedor" id="mainContainer">
        <div class="main-header">
            <div class="header-logo-container">
                <div class="logo-header">
                    <img src="https://edwinhsvcl14-maker.github.io/asistencias/logo_hermandad.png" alt="Logo de la Hermandad">
                </div>
                <div class="header-texto">
                    <h1>COMIT√â ELECTORAL</h1>
                    <h2>Elecciones Generales Trienio 2026-2028: Proceso en Curso</h2>
                </div>
                <div class="logo-header">
                    <img src="https://edwinhsvcl14-maker.github.io/asistencias/logo_hermandad.png" alt="Logo de la Hermandad">
                </div>
            </div>
        </div>

        <div class="seccion">
            <h3>Bienvenida y Llamado a la Participaci√≥n</h3>
            <p>El Comit√© Electoral General 2026-2028 se complacen en dar la m√°s cordial bienvenida a nuestros hermanos y hermanas al <strong>Proceso de Elecciones Generales</strong>. Este ejercicio de transparencia y participaci√≥n es fundamental para asegurar una gesti√≥n comprometida con nuestra Institucion y por el servicio a nuestra Sant√≠sima Virgen del Carmen de Lima. Exhortamos a todos los nuestros hermanos a informarse, participar activamente y ejercer su derecho al voto con discernimiento.</p>
        </div>
        
        <div class="seccion">
            <h3>Conformaci√≥n del Comit√© Eectoral (2026-2028)</h3>
            <p style="font-style: italic; font-size: 0.95em; color: var(--color-acento-oscuro); text-align: center;">Conforme al Decreto N¬∞ 027‚Äì2025-P-VDS-HSVCL, se ha designado a los hermanos que integran este comit√© para la conducci√≥n transparente del proceso:</p>
            
            <div class="comite-electoral-container">
                <div class="comite-grid">
                    <span class="comite-header">Cargo</span>
                    <span class="comite-header">Hermano</span>
                    <span class="comite-header comite-cuadrilla">Pertenencia</span>
                    
                    <span class="comite-cargo">Presidente</span>
                    <span class="comite-hermano">Hno. Alberto Mart√≠n De la Cruz Risco</span>
                    <span class="comite-cuadrilla">Capataz de la D√©cimo Quinta Cuadrilla</span>
                    
                    <span class="comite-cargo">Secretario</span>
                    <span class="comite-hermano">Hno. Richard Alex Paco Jer√≠</span>
                    <span class="comite-cuadrilla">Secretario de la Quinta Cuadrilla</span>
                    
                    <span class="comite-cargo">Vocal</span>
                    <span class="comite-hermano">Hno. Juan Daniel Urbina Yarupet√°n</span>
                    <span class="comite-cuadrilla">Sub-Capataz de la D√©cima Sexta Cuadrilla</span>
                    
                    <span class="comite-cargo">Vocal</span>
                    <span class="comite-hermano">Hno. Luis Alberto Su√°rez Sandoval</span>
                    <span class="comite-cuadrilla">Secretario de la D√©cima Segunda Cuadrilla</span>
                </div>
            </div>
        </div>

        <div class="seccion">
            <h3>Listas de Candidatos y Propuestas</h3>
            <p>Se han presentado oficialmente la <strong>Lista N¬∞ 01</strong> y la <strong>Lista N¬∞ 02</strong>. Ambas planchas han cumplido con los requisitos iniciales y presentan visiones s√≥lidas para el futuro de nuestra Hermandad. A continuaci√≥n, le ofrecemos una visualizaci√≥n clara del cronograma electoral y un acceso directo a los planes de trabajo y perfiles de cada candidato.</p>
        </div>

        <div class="seccion progress-section">
            <div class="progress-title">üóìÔ∏è Cronograma del Proceso Electoral 2025</div>
            
            <div class="legend">
                <div class="legend-item">
                    <span class="legend-color completed"></span>
                    <span>Etapa Completada</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color active"></span>
                    <span>Etapa **Activa** (En Curso)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color pending"></span>
                    <span>Etapa Pendiente</span>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="timeline">
                    <div class="timeline-line"></div>
                    <div class="timeline-progress" id="timelineProgress"></div>

                    <div class="timeline-item" data-index="0" data-date="2025-10-27">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Oct 23 - 27</span>
                        <span class="timeline-label">Inscripci√≥n de Listas</span>
                    </div>
                    <div class="timeline-item" data-index="1" data-date="2025-11-03">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Oct 29 - Nov 03</span>
                        <span class="timeline-label">Revisi√≥n de Documentos</span>
                    </div>
                    <div class="timeline-item" data-index="2" data-date="2025-11-10">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Nov 05 - 10</span>
                        <span class="timeline-label">Presentaci√≥n de Tachas / Impugnaciones</span>
                    </div>
                    <div class="timeline-item" data-index="3" data-date="2025-11-17">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Nov 12 - 17</span>
                        <span class="timeline-label">Subsanaci√≥n de Postulantes</span>
                    </div>
                    <div class="timeline-item" data-index="4" data-date="2025-11-19">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Nov 18 - 19</span>
                        <span class="timeline-label">Confirmaci√≥n de Listas Aptas</span>
                    </div>
                    <div class="timeline-item" data-index="5" data-date="2025-11-23">
                        <span class="timeline-point"></span>
                        <span class="timeline-date">Nov 23</span>
                        <span class="timeline-label">Elecci√≥n del Directorio General</span>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="btn-container">
            <a href="https://edwinhsvcl14-maker.github.io/asistencias/Elecciones_Candidatos.html" class="btn-main">Ver Listas, Planes de Trabajo y Perfiles</a>
        </div>

        <div class="pie-pagina">
            <p style="font-size: 0.85em; color: var(--color-acento-oscuro);">Comit√© Electoral General Trienio 2026-2028 |</p>
        </div>
    </div>

<script>
    // ==========================================================
    // L√≥gica para la Barra de Progreso del Cronograma (Arreglada)
    // ==========================================================
    
    // La fecha actual para testing es: Lunes, 10 de noviembre de 2025
    // ¬°Ojo! He actualizado la fecha de prueba a la fecha de hoy para una mejor visualizaci√≥n.
    const TODAY = new Date('November 10, 2025 16:27:44'); 
    
    // Fechas de inicio/fin de cada hito
    const milestones = [
        { start: new Date('October 23, 2025 00:00:00'), end: new Date('October 27, 2025 23:59:59') }, // 0: Inscripci√≥n (COMPLETADO)
        { start: new Date('October 29, 2025 00:00:00'), end: new Date('November 3, 2025 23:59:59') }, // 1: Revisi√≥n (COMPLETADO)
        { start: new Date('November 5, 2025 00:00:00'), end: new Date('November 10, 2025 23:59:59') }, // 2: Tachas (ACTIVO - Termina hoy)
        { start: new Date('November 12, 2025 00:00:00'), end: new Date('November 17, 2025 23:59:59') },// 3: Subsanaci√≥n (PENDIENTE)
        { start: new Date('November 18, 2025 00:00:00'), end: new Date('November 19, 2025 23:59:59') },// 4: Confirmaci√≥n (PENDIENTE)
        { start: new Date('November 23, 2025 00:00:00'), end: new Date('November 23, 2025 23:59:59') }  // 5: Elecci√≥n (PENDIENTE)
    ];

    const PROGRESS_BAR = document.getElementById('timelineProgress');
    const TIMELINE_ITEMS = document.querySelectorAll('.timeline-item');
    const totalItems = milestones.length;

    function updateTimeline() {
        let activeIndex = -1;
        
        // 1. Determinar estados (Completed, Active, Pending)
        TIMELINE_ITEMS.forEach((item, i) => {
            const milestone = milestones[i];
            item.classList.remove('completed', 'active');
            
            if (TODAY > milestone.end) {
                // Etapa Completada
                item.classList.add('completed');
            } else if (TODAY >= milestone.start && TODAY <= milestone.end) {
                // Etapa Activa (ESTO ENCIENDE EL PULSO)
                item.classList.add('active');
                activeIndex = i;
            } 
        });
        
        // 2. Calcular y actualizar el progreso de la barra
        let totalProgress = 0;
        const segmentShare = 100 / totalItems; 
        
        if (activeIndex !== -1) {
            // Caso: Hay una etapa activa
            const activeMilestone = milestones[activeIndex];
            
            // Calculamos el punto central del hito activo (donde deber√≠a detenerse la barra)
            let progressToActivePoint = (activeIndex * segmentShare) + (segmentShare / 2);

            // Calculamos el progreso temporal dentro de la etapa activa (0 a 1)
            const totalDuration = activeMilestone.end.getTime() - activeMilestone.start.getTime();
            const elapsedDuration = TODAY.getTime() - activeMilestone.start.getTime();
            let currentSegmentProgress = Math.min(1, Math.max(0, elapsedDuration / totalDuration));
            
            // La barra avanza si ya estamos en la etapa activa
            if(currentSegmentProgress > 0) {
                 totalProgress = progressToActivePoint;
            } else {
                 // Si la etapa no ha iniciado (currentSegmentProgress=0), el progreso es solo de las completadas
                 totalProgress = activeIndex * segmentShare;
            }
        
        } else {
            // Caso: No hay hito activo (ej. si ya termin√≥ la elecci√≥n)
            let completedCount = 0;
            milestones.forEach(m => { if (TODAY > m.end) completedCount++; });
            totalProgress = completedCount * segmentShare;

            // Si todos est√°n completados, va al 100%
            if (completedCount === totalItems) {
                totalProgress = 100;
            }
        }

        // 3. Aplicar progreso a la barra
        const progressValue = Math.min(100, totalProgress); 
        
        if (window.innerWidth <= 768) {
            // M√≥vil (Vertical)
            const timelineElement = document.querySelector('.timeline');
            // Nota: Se debe calcular la altura del contenedor principal de la l√≠nea para evitar errores.
            if(timelineElement) {
                const totalVerticalHeight = timelineElement.offsetHeight;
                const progressHeight = (progressValue / 100) * totalVerticalHeight;
                PROGRESS_BAR.style.height = `${progressHeight}px`; 
            }
        } else {
            // Escritorio (Horizontal)
            PROGRESS_BAR.style.width = `${progressValue}%`; 
        }
    }

    // ==========================================================
    // NUEVA L√ìGICA: Control de Preloader y Carga del Contenido
    // ==========================================================
    
    window.addEventListener('load', () => {
        const preloader = document.getElementById('preloader');
        const mainContainer = document.getElementById('mainContainer');
        
        // Ejecutar la l√≥gica del cronograma primero
        updateTimeline();
        window.addEventListener('resize', updateTimeline);
        
        // 1. Ocultar el preloader con transici√≥n de 1 segundo (MODIFICADO)
        preloader.classList.add('hidden');
        
        // 2. Mostrar el contenido con efecto fade-in despu√©s de que el preloader haya desaparecido
        // Usamos setTimeout para que coincida con el tiempo de transici√≥n de CSS del preloader (1 segundo)
        setTimeout(() => {
            mainContainer.classList.add('visible');
        }, 1000); // <-- MODIFICADO: 1000 milisegundos = 1 segundo
    });
    
</script>

</body>
</html>
